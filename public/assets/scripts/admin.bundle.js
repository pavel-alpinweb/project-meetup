!function(e){var a={};function t(n){if(a[n])return a[n].exports;var r=a[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,t),r.l=!0,r.exports}t.m=e,t.c=a,t.d=function(e,a,n){t.o(e,a)||Object.defineProperty(e,a,{enumerable:!0,get:n})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,a){if(1&a&&(e=t(e)),8&a)return e;if(4&a&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(t.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&a&&"string"!=typeof e)for(var r in e)t.d(n,r,function(a){return e[a]}.bind(null,r));return n},t.n=function(e){var a=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(a,"a",a),a},t.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)},t.p="",t(t.s=14)}({0:function(e,a){console.log("Hello world!")},13:function(e,a){var t,n,r,o,l,i,s,d;t=jQuery,o="onpaste",(r=document.createElement("input")).setAttribute(o,""),l=("function"==typeof r[o]?"paste":"input")+".mask",i=navigator.userAgent,s=/iphone/i.test(i),d=/android/i.test(i),t.mask={definitions:{9:"[0-9]",a:"[A-Za-z]","*":"[A-Za-z0-9]"},dataName:"rawMaskFn",placeholder:"_"},t.fn.extend({caret:function(e,a){var t;if(0!==this.length&&!this.is(":hidden"))return"number"==typeof e?(a="number"==typeof a?a:e,this.each(function(){this.setSelectionRange?this.setSelectionRange(e,a):this.createTextRange&&((t=this.createTextRange()).collapse(!0),t.moveEnd("character",a),t.moveStart("character",e),t.select())})):(this[0].setSelectionRange?(e=this[0].selectionStart,a=this[0].selectionEnd):document.selection&&document.selection.createRange&&(t=document.selection.createRange(),e=0-t.duplicate().moveStart("character",-1e5),a=e+t.text.length),{begin:e,end:a})},unmask:function(){return this.trigger("unmask")},mask:function(e,a){var r,o,i,c,u;return!e&&0<this.length?t(this[0]).data(t.mask.dataName)():(a=t.extend({placeholder:t.mask.placeholder,completed:null},a),r=t.mask.definitions,o=[],i=u=e.length,c=null,t.each(e.split(""),function(e,a){"?"==a?(u--,i=e):r[a]?(o.push(new RegExp(r[a])),null===c&&(c=o.length-1)):o.push(null)}),this.trigger("unmask").each(function(){var f=t(this),p=t.map(e.split(""),function(e,t){if("?"!=e)return r[e]?a.placeholder:e}),m=f.val();function v(e){for(;++e<u&&!o[e];);return e}function h(e,t){var n,r;if(!(e<0)){for(n=e,r=v(t);n<u;n++)if(o[n]){if(!(r<u&&o[n].test(p[r])))break;p[n]=p[r],p[r]=a.placeholder,r=v(r)}$(),f.caret(Math.max(c,e))}}function g(e,t){var n;for(n=e;n<t&&n<u;n++)o[n]&&(p[n]=a.placeholder)}function $(){f.val(p.join(""))}function k(e){var t,n,r=f.val(),l=-1;for(t=0,pos=0;t<u;t++)if(o[t]){for(p[t]=a.placeholder;pos++<r.length;)if(n=r.charAt(pos-1),o[t].test(n)){p[t]=n,l=t;break}if(pos>r.length)break}else p[t]===r.charAt(pos)&&t!==i&&(pos++,l=t);return e?$():l+1<i?(f.val(""),g(0,u)):($(),f.val(f.val().substring(0,l+1))),i?t:c}f.data(t.mask.dataName,function(){return t.map(p,function(e,t){return o[t]&&e!=a.placeholder?e:null}).join("")}),f.attr("readonly")||f.one("unmask",function(){f.unbind(".mask").removeData(t.mask.dataName)}).bind("focus.mask",function(){var a;clearTimeout(n),m=f.val(),a=k(),n=setTimeout(function(){$(),a==e.length?f.caret(0,a):f.caret(a)},10)}).bind("blur.mask",function(){k(),f.val()!=m&&f.change()}).bind("keydown.mask",function(e){var a,t,n,r=e.which;8===r||46===r||s&&127===r?(t=(a=f.caret()).begin,(n=a.end)-t==0&&(t=46!==r?function(e){for(;0<=--e&&!o[e];);return e}(t):n=v(t-1),n=46===r?v(n):n),g(t,n),h(t,n-1),e.preventDefault()):27==r&&(f.val(m),f.caret(0,k()),e.preventDefault())}).bind("keypress.mask",function(e){var n,r,l,i=e.which,s=f.caret();e.ctrlKey||e.altKey||e.metaKey||i<32||i&&(s.end-s.begin!=0&&(g(s.begin,s.end),h(s.begin,s.end-1)),(n=v(s.begin-1))<u&&(r=String.fromCharCode(i),o[n].test(r)&&(function(e){var t,n,r,l;for(t=e,n=a.placeholder;t<u;t++)if(o[t]){if(r=v(t),l=p[t],p[t]=n,!(r<u&&o[r].test(l)))break;n=l}}(n),p[n]=r,$(),l=v(n),d?setTimeout(t.proxy(t.fn.caret,f,l),0):f.caret(l),a.completed&&u<=l&&a.completed.call(f))),e.preventDefault())}).bind(l,function(){setTimeout(function(){var e=k(!0);f.caret(e),a.completed&&e==f.val().length&&a.completed.call(f)},0)}),k()}))}})},14:function(e,a,t){"use strict";function n(e,a){$('[data-role="ajaxPreloader"]').fadeIn(),$.post(e,a,function(e){$('[data-role="server message"]').removeClass("hide").removeClass("m-fail").text(e)}).fail(function(){$('[data-role="server message"]').removeClass("hide").addClass("m-fail").text("Что-то пошло не так!")}).always(function(){$('[data-role="ajaxPreloader"]').fadeOut(),setTimeout(function(){$('[data-role="server message"]').addClass("hide")},3e3)})}t.r(a),t(0);var r=$('[data-role="events-form"] [data-role="form-row"]:last-child'),o=[],l={};$('[data-role="add-table-row-events"]').click(function(e){e.preventDefault(),r.clone().appendTo('[data-role="events-form"] [data-role="form-body"]')}),$("html, body").on("click",'[data-role="remove-table-row"]',function(e){e.preventDefault(),$(this).parents('[data-role="form-row"]').remove()}),$('[data-role="save-table-events"]').click(function(e){e.preventDefault(),o=[];var a=$('[data-role="events-form"] [data-role="form-row"]');a.each(function(){var e={};e.time=$(this).find('[data-input="event-time"]').val(),e.name=$(this).find('[data-input="event-name"]').val(),o.push(e)}),console.log(l),l.rows=o,0==a.length?($('[data-role="server message"]').removeClass("hide").addClass("m-fail").text("Необходимо добавить хотябы одно событие!"),setTimeout(function(){$('[data-role="server message"]').addClass("hide")},3e3)):n("/events",l)});var i=$('[data-role="speakers-form"] [data-role="form-row"]:last-child');function s(e){var a={};return a.title=$(e).find('[data-input="title"]').val(),a.text=$(e).find('[data-input="text"]').val(),0<$(e).find('[data-input="link"]').length&&(a.link=$(e).find('[data-input="link"]').val()),console.log(a),a}$("body").on("click",'[data-role="remove-table-row-speakers"]',function(e){e.preventDefault(),$(this).parents('[data-role="speakers-form-row"]').remove()}),$("body").on("click",'[data-role="soc-flag"]',function(){""!=$(this).next().val()&&$(this).parent().toggleClass("is-active")}),$("body").on("click",'[data-role="social-input"]',function(){$(this).parent().addClass("is-active")}),$("body").on("focusout",'[data-role="social-input"]',function(){""==$(this).val()&&$(this).parent().removeClass("is-active")}),$('[data-role="add-table-row-speakers"]').click(function(e){e.preventDefault(),i.clone().appendTo('[data-role="speakers-form"]  [data-role="form-body"]')}),$('[data-role="save-table-speakers"]').click(function(e){e.preventDefault();var a=[];$('[data-role="speakers-form"] [data-role="form-row"]').each(function(){var e={};e.name=$(this).find('[data-input="name"]').val(),e.description=$(this).find('[data-input="description"]').val(),e.photo=$(this).find('[data-input="photo"]').val();var t=[];$(this).find('[data-role="social-input"]').each(function(){var e={};e.name=$(this).attr("data-name"),e.link=$(this).val(),$(this).parents('[data-role="social-input-container"]').hasClass("is-active")?e.empty=!1:e.empty=!0,t.push(e)}),e.social=t,a.push(e)}),console.log(a),n("/speakersList",a)}),$('[data-role="saveWelcomeText"]').click(function(e){e.preventDefault(),n("/welcomeText",s('[data-role="welcomeText"]'))}),$('[data-role="savePromoText"]').click(function(e){e.preventDefault(),n("/promoText",s('[data-role="promoText"]'))}),t(13);var d={};$('[data-role="timer-input"]').mask("9999, 99, 99",{placeholder:" "}),$('[data-role="save-header"]').click(function(e){e.preventDefault();var a=(""==$('[data-role="timer-input"]').val()?$('[data-role="timer-input"]').attr("placeholder"):$('[data-role="timer-input"]').val()).split(", ");d.timerYear=+a[0],d.timerMounth=+a[1],d.timerDays=+a[2],d.emailForRegistration=$('[data-role="email-reg-input"]').val(),console.log(d),n("/headerSettings",d)});var c,u,f={},p=[],m=$('[data-role="contacts-admin-form"]');function v(e){$('[data-role="server message"]').removeClass("hide").addClass("m-fail").text(e),setTimeout(function(){$('[data-role="server message"]').addClass("hide")},3e3)}function h(e,a,t){$('[data-role="ajaxPreloader"]').fadeIn();var n=new FormData;n.append("uploadFile",e),$.ajax({url:a,data:n,cache:!1,contentType:!1,processData:!1,type:"POST",success:function(e){"ok"==e.status?($('[data-role="server message"]').removeClass("hide").removeClass("m-fail").text(e.text),$('[data-role="ajaxPreloader"]').fadeOut(),setTimeout(function(){$('[data-role="server message"]').addClass("hide")},3e3),t(e.data)):($('[data-role="ajaxPreloader"]').fadeOut(),v(e.errors))}})}function g(e){var a=e[e.length-1];$('[data-role="preview-container"]').html(""),$('[data-role="gallery-file-input"]').val("");var t='<div class="gallery-form__image-container" id="'+a.id+'"><div class="gallery-form__button" data-role="delete-image" data-id="'+a.id+'"><svg class="gallery-form__delete"><use xlink:href="assets/images/icons/sprite.svg#More_icon"></use></svg></div><img src="'+a.src+'" alt="img"></div> ';$('[data-role="gallery-form-container"]').append(t)}$('[data-role="save-contacts"]').click(function(e){e.preventDefault(),p=[],m.find('[data-role="social-input"]').each(function(){var e={};e.name=$(this).attr("data-name"),e.link=$(this).val(),$(this).parents('[data-role="social-input-container"]').hasClass("is-active")?e.empty=!1:e.empty=!0,p.push(e)}),f.email=m.find('[data-input="email-post-input"]').val(),f.address=m.find('[data-input="address-input"]').val(),f.map=m.find('[data-input="map-code-input"]').val(),f.social=p,console.log(f),n("/contacts",f)}),$('[data-role="add-bg-file"]').click(function(e){e.preventDefault(),$('[data-role="file-input"]').click()}),$('[data-role="file-input"]').change(function(){var e=this.files[0],a=new FileReader;return a.onload=function(){var t="image/png"==e.type||"image/jpeg"==e.type||"image/jpg"==e.type,n=e.size/1024/1024<2;t&&n?$('[data-role="preview-main-bg"]').attr("src",a.result):t?n||($('[data-role="file-input"]').val(""),v("Файл не должен привышать размер 2mb")):($('[data-role="file-input"]').val(""),v("Можно загружать только изображения форматов: png, jpeg, jpg"))},a.readAsDataURL(e),c=e}),$('[data-role="upload-file"]').click(function(e){e.preventDefault(),""!=$('[data-role="file-input"]').val()?h(c,"/mainBackgorund"):v("Выберите изображение для загрузки")}),$('[data-role="add-gallery-file"]').click(function(e){e.preventDefault(),$('[data-role="gallery-file-input"]').click()}),$('[data-role="gallery-file-input"]').change(function(){var e=this.files[0],a=new FileReader;return a.onload=function(){var t="image/png"==e.type||"image/jpeg"==e.type||"image/jpg"==e.type,n=e.size/1024/1024<2;if(t&&n){$('[data-role="preview-container"]').html("");var r=$("<img>");r.attr("src",a.result),$('[data-role="preview-container"]').prepend(r)}else t?n||($('[data-role="gallery-file-input"]').val(""),v("Файл не должен привышать размер 2mb")):($('[data-role="gallery-file-input"]').val(""),v("Можно загружать только изображения форматов: png, jpeg, jpg"))},a.readAsDataURL(e),u=e}),$('[data-role="upload-image"]').click(function(e){e.preventDefault(),""!=$('[data-role="gallery-file-input"]').val()?h(u,"/gallery",g):v("Выберите изображение для загрузки")}),$("body").on("click",'[data-role="delete-image"]',function(){$('[data-role="ajaxPreloader"]').fadeIn();var e=$(this).attr("data-id"),a=$(this).parent("#"+e);console.log(a),$.ajax({url:"/gallery/"+e,type:"DELETE",success:function(e){a.remove(),$('[data-role="ajaxPreloader"]').fadeOut(),v(e)}})})}});